<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{ headline }} - {{ tagline }}</title>
        <meta name="description" content="{{ tagline }}">
        <meta name="author" content="{{ headline }}">

        <!-- Open Graph / Facebook -->
        <meta property="og:type" content="website">
        <meta property="og:title" content="{{ headline }}">
        <meta property="og:description" content="{{ tagline }}">
        {% if banner_path %}<meta property="og:image" content="{{ banner_path }}">{% endif %}
        {# Consider adding <meta property="og:url" content="..."> #}

        <!-- Twitter -->
        <meta property="twitter:card" content="summary_large_image">
        <meta property="twitter:title" content="{{ headline }}">
        <meta property="twitter:description" content="{{ tagline }}">
        {% if banner_path %}<meta property="twitter:image" content="{{ banner_path }}">{% endif %}
        {# Consider adding <meta property="twitter:site" content="@YourHandle"> #}
        {# Consider adding <meta property="twitter:image:alt" content="..."> #}

        <!-- Stylesheet -->
        <link rel="stylesheet" href="styles.css">
        {# Consider <link rel="preload" href="styles.css" as="style"> #}

        <!-- SVG Sprite Sheet -->
        <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
            {# Ensure ALL icons potentially used in services, about, contact, etc. are defined here #}
            <symbol id="icon-phone" viewBox="0 0 20 20" fill="currentColor"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/></symbol>
            <symbol id="icon-mail" viewBox="0 0 20 20" fill="currentColor"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"/><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"/></symbol>
            <symbol id="icon-location" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"/></symbol>
            <symbol id="icon-whatsapp" viewBox="0 0 24 24" fill="currentColor"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.33 3.4 16.81L2.1 21.9L7.42 20.61C8.84 21.32 10.39 21.72 12.04 21.72C17.5 21.72 21.95 17.27 21.95 11.81C21.95 6.35 17.5 2 12.04 2M12.04 19.93C10.54 19.93 9.1 19.5 7.85 18.73L7.55 18.54L5.32 19.18L5.97 17L5.77 16.69C4.91 15.32 4.42 13.67 4.42 11.91C4.42 7.7 7.83 4.29 12.04 4.29C16.25 4.29 19.66 7.7 19.66 11.91C19.66 16.12 16.25 19.93 12.04 19.93M17.41 14.6C17.16 14.48 15.89 13.84 15.65 13.75C15.42 13.66 15.25 13.61 15.09 13.85C14.93 14.09 14.43 14.71 14.28 14.87C14.14 15.03 14 15.05 13.75 14.93C13.51 14.81 12.52 14.45 11.37 13.43C10.46 12.63 9.89 11.64 9.73 11.39C9.57 11.15 9.7 11.04 9.82 10.92C9.93 10.8 10.09 10.59 10.23 10.43C10.37 10.27 10.42 10.15 10.53 9.96C10.64 9.77 10.59 9.6 10.5 9.46C10.41 9.32 9.77 7.71 9.53 7.14C9.3 6.57 9.06 6.62 8.89 6.61H8.4C8.16 6.61 7.93 6.66 7.74 6.89C7.55 7.12 6.93 7.7 6.93 8.89C6.93 10.08 7.77 11.2 7.91 11.36C8.05 11.52 9.76 14.14 12.37 15.3C14.98 16.46 14.98 15.98 15.3 15.93C15.62 15.88 16.89 15.18 17.14 14.93C17.39 14.68 17.39 14.5 17.41 14.41C17.41 14.32 17.26 14.27 17.41 14.6Z"/></symbol>
            <symbol id="icon-facebook" viewBox="0 0 24 24" fill="currentColor"><path d="M14 13.5H16.5L17.5 9.5H14V7.5C14 6.47 14 5.5 16 5.5H17.5V2.14C17.174 2.097 15.943 2 14.643 2C11.928 2 10 3.657 10 6.7V9.5H7V13.5H10V22H14V13.5Z"/></symbol>
            <symbol id="icon-twitter" viewBox="0 0 24 24" fill="currentColor"><path d="M22.46 6C21.71 6.3 20.91 6.5 20.06 6.6C20.91 6.1 21.56 5.3 21.88 4.3C21.08 4.8 20.23 5.1 19.34 5.3C18.6 4.5 17.55 4 16.4 4C14.2 4 12.39 5.8 12.39 8C12.39 8.3 12.42 8.6 12.48 8.9C8.7 8.7 5.4 6.9 3.1 4.1C2.7 4.7 2.5 5.4 2.5 6.2C2.5 7.5 3.2 8.7 4.2 9.4C3.6 9.4 3 9.2 2.4 9C2.4 11.1 3.9 12.9 5.9 13.3C5.5 13.4 5.2 13.5 4.8 13.5C4.5 13.5 4.2 13.5 3.9 13.4C4.5 15.1 6 16.3 7.7 16.3C6.3 17.4 4.6 18.1 2.8 18.1C2.5 18.1 2.2 18.1 1.9 18C3.6 19.2 5.6 20 7.8 20C16.4 20 20.8 12.9 20.8 6.5C20.8 6.3 20.8 6.1 20.7 5.9C21.5 5.4 22.1 4.7 22.46 3.8L22.46 6Z"/></symbol>
            <symbol id="icon-instagram" viewBox="0 0 24 24" fill="currentColor"><path d="M7.8 2H16.2C19.4 2 22 4.6 22 7.8V16.2C22 19.4 19.4 22 16.2 22H7.8C4.6 22 2 19.4 2 16.2V7.8C2 4.6 4.6 2 7.8 2M7.6 4C5.6 4 4 5.6 4 7.6V16.4C4 18.4 5.6 20 7.6 20H16.4C18.4 20 20 18.4 20 16.4V7.6C20 5.6 18.4 4 16.4 4H7.6M17.2 6C17.7 6 18 6.3 18 6.8C18 7.2 17.7 7.6 17.2 7.6C16.8 7.6 16.4 7.2 16.4 6.8C16.4 6.3 16.8 6 17.2 6M12 7C14.8 7 17 9.2 17 12C17 14.8 14.8 17 12 17C9.2 17 7 14.8 7 12C7 9.2 9.2 7 12 7M12 9C10.3 9 9 10.3 9 12C9 13.7 10.3 15 12 15C13.7 15 15 13.7 15 12C15 10.3 13.7 9 12 9Z"/></symbol>
            <symbol id="icon-linkedin" viewBox="0 0 24 24" fill="currentColor"><path d="M19 3A2 2 0 0 1 21 5V19A2 2 0 0 1 19 21H5A2 2 0 0 1 3 19V5A2 2 0 0 1 5 3H19M18.5 18.5V13.2A3.26 3.26 0 0 0 15.24 9.94C14.39 9.94 13.4 10.46 13 11.1V10.28H10.13V18.5H13V13.07C13 11.93 13.32 10.89 14.91 10.89C16.5 10.89 16.5 12.12 16.5 13.1V18.5H18.5M6.88 8.56A1.68 1.68 0 0 0 8.56 6.88C8.56 5.95 7.81 5.19 6.88 5.19C5.95 5.19 5.19 5.95 5.19 6.88A1.68 1.68 0 0 0 6.88 8.56M8.27 18.5V10.28H5.5V18.5H8.27Z"/></symbol>
            <symbol id="icon-menu" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/></symbol>
            <symbol id="icon-arrow-up" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"/></symbol>
            <symbol id="icon-shield-check" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 1.944A11.954 11.954 0 002.166 5.002a12.016 12.016 0 00-.166 2.007C2 11.226 5.34 15.67 10 17.317c4.66-1.647 8-6.09 8-10.308a12.037 12.037 0 00-.166-2.007A11.954 11.954 0 0010 1.944zM9 11.586l-1.707-1.707a1 1 0 00-1.414 1.414l2.414 2.414a1 1 0 001.414 0l5.414-5.414a1 1 0 00-1.414-1.414L9 11.586z" clip-rule="evenodd"/></symbol>
            <symbol id="icon-lightning-bolt" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/></symbol>
            <symbol id="icon-users" viewBox="0 0 20 20" fill="currentColor"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/></symbol>
            <symbol id="icon-currency-dollar" viewBox="0 0 20 20" fill="currentColor"><path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.5 2.5 0 00-.567-.267C8.07 8.488 8 8.738 8 9v2c0 .262.07.512.433.65A1.91 1.91 0 019 12.125V14c0 .552.448 1 1 1s1-.448 1-1v-1.875c.366.07.707.18 1 .313V11a1 1 0 112 0v1.126a4.97 4.97 0 00-1.066-.359 1.912 1.912 0 01-.434-.65C12 11.262 12 11 12 11V9c0-.262-.07-.512-.433-.65a1.91 1.91 0 00-.567-.267V6.382a2.5 2.5 0 01.567.267c.363.138.433.388.433.65V8a1 1 0 112 0V7.125A4.97 4.97 0 0013 6.768V6a1 1 0 10-2 0v.768a4.971 4.971 0 00-1.066.359 1.912 1.912 0 00-.434.65C9.137 7.93 9 8.18 9 8.5v.5a1 1 0 102 0V9c0-.262.07-.512.433-.65z"/><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.093a4.91 4.91 0 00-1.654.296 1.912 1.912 0 00-.433.65A1.912 1.912 0 006 6.912V13a1 1 0 102 0v-1.093a4.91 4.91 0 001.654-.296 1.912 1.912 0 00.433-.65A1.912 1.912 0 0011 10.088V6a1 1 0 10-2 0v-.093a4.91 4.91 0 00-1.654-.296 1.912 1.912 0 00-.433-.65A1.912 1.912 0 006 4.088V4a1 1 0 10-2 0v.088a4.91 4.91 0 001.654.296A1.912 1.912 0 007.912 5a1.912 1.912 0 00.433.65c.08.14.15.283.206.428a1 1 0 001.898-.428A2.889 2.889 0 0111 5.088V5z" clip-rule="evenodd"/></symbol>
            <symbol id="icon-briefcase" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5 4a3 3 0 013-3h4a3 3 0 013 3v1h-4v-1a1 1 0 10-2 0v1H5V4zm7 2v1h3V6h2a2 2 0 012 2v10a2 2 0 01-2 2H3a2 2 0 01-2-2V8a2 2 0 012-2h2v1h3V6h2zm-3 5a1 1 0 100 2h.01a1 1 0 100-2H9zm-2 1a1 1 0 11-2 0 1 1 0 012 0zm4 0a1 1 0 11-2 0 1 1 0 012 0z" clip-rule="evenodd"/></symbol>
            <symbol id="icon-lightbulb" viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM5.05 6.464A1 1 0 106.464 5.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM5 10a1 1 0 01-1 1H3a1 1 0 110-2h1a1 1 0 011 1zM8 16v-1h4v1a2 2 0 11-4 0zM12 14c.015-.34.208-.646.477-.859a4 4 0 10-4.954 0c.27.213.462.519.476.859h4.002z"/></symbol>
            <symbol id="icon-chart" viewBox="0 0 20 20" fill="currentColor"><path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/></symbol>
            <symbol id="icon-globe" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM4.332 8.027a6.012 6.012 0 011.912-2.706C6.512 5.73 6.974 6 7.5 6A1.5 1.5 0 019 7.5V8a2 2 0 004 0 2 2 0 011.523-1.943A5.977 5.977 0 0116 10c0 .34-.028.675-.083 1H15a2 2 0 00-2 2v2.197A5.973 5.973 0 0110 16v-2a2 2 0 00-2-2 2 2 0 01-2-2 2 2 0 00-1.668-1.973z" clip-rule="evenodd"/></symbol>
            <symbol id="icon-trophy" viewBox="0 0 20 20" fill="currentColor"><path d="M11 3a1 1 0 100 2h1.586l-4.293 4.293a1 1 0 101.414 1.414L14 6.414V8a1 1 0 102 0V4a1 1 0 00-1-1h-4zm-7 8a1 1 0 011-1h2a1 1 0 110 2H5a1 1 0 01-1-1zm4 0a1 1 0 011-1h2a1 1 0 110 2h-2a1 1 0 01-1-1zM3 12a1 1 0 100 2h.01a1 1 0 100-2H3zm5.293 1.293a1 1 0 011.414 0L12 15.586l2.293-2.293a1 1 0 011.414 1.414L13.414 17l2.293 2.293a1 1 0 01-1.414 1.414L12 18.414l-2.293 2.293a1 1 0 01-1.414-1.414L10.586 17l-2.293-2.293a1 1 0 010-1.414z"/></symbol>
            <symbol id="icon-default" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z" clip-rule="evenodd"/></symbol>
            <symbol id="icon-star" viewBox="0 0 20 20" fill="currentColor"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/></symbol>
            <symbol id="icon-plus-circle" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd"/></symbol>
            <symbol id="icon-information-circle" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"/></symbol>
        </svg>

        <style>
            /* Define theme colors from the dynamic color scheme */
            :root {
                --color-primary: {{ colors.primary | default('#4A90E2') }};
                --color-secondary: {{ colors.secondary | default('#6FCF97') }};
                /* Use CSS variables for background and text */
                --color-background: {{ colors.background | default('#FFFFFF') }}; /* Standard light background */
                --color-text: {{ colors.text | default('#333333') }}; /* Standard dark text */
                --color-text-muted: {{ colors.text | default('#333333') }}B3; /* Dark text with opacity e.g. gray-600 */
                --color-text-on-primary: {{ colors.text_on_primary | default('#FFFFFF') }};
                --color-text-on-secondary: {{ colors.text_on_secondary | default('#333333') }};
                --color-text-on-gradient: {{ colors.text_on_gradient | default('#FFFFFF') }};
                --color-text-on-dark: {{ colors.text_on_dark | default('#FFFFFF') }};
                --transition-speed: 0.3s;
            }

            /* Apply base background and text colors */
            body {
                background-color: var(--color-background); /* Use the light background from palette */
                color: var(--color-text);
                /* Define base font, e.g., using Tailwind's sans-serif stack */
                /* font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji"; */
            }

            /* Standard Tailwind Backgrounds */
            .bg-default { background-color: var(--color-background); } /* Use palette bg as default section */
            .bg-section-light { background-color: #FFFFFF; } /* White for cards/sections */
            .bg-section-neutral { background-color: #F9FAFB; } /* Tailwind gray-50 */
            .bg-section-dark { background-color: #111827; } /* Tailwind gray-900 */


            /* Color Utilities */
            .bg-primary { background-color: var(--color-primary); }
            .text-primary { color: var(--color-primary); }
            .border-primary { border-color: var(--color-primary); }
            .ring-primary:focus { --tw-ring-color: var(--color-primary); } /* For focus rings */

            .bg-secondary { background-color: var(--color-secondary); }
            .text-secondary { color: var(--color-secondary); }

            .text-contrast-primary { color: var(--color-text-on-primary); }
            .text-contrast-secondary { color: var(--color-text-on-secondary); }
            .text-contrast-gradient { color: var(--color-text-on-gradient); }
            .text-contrast-dark { color: var(--color-text-on-dark); }

            .text-muted { color: var(--color-text-muted); } /* For lighter dark text */

            /* Gradient ONLY for Hero */
            .hero-gradient {
                background: linear-gradient(135deg, var(--color-primary), var(--color-secondary));
            }
            /* Subtle text shadow for hero text to improve contrast on gradient */
            .hero-text-shadow {
                 text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            }

            /* Hover effects */
            .hover-lift { transition: transform var(--transition-speed) ease, box-shadow var(--transition-speed) ease; }
            .hover-lift:hover { transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,0.08); }

            /* Section divider */
            .section-divider { height: 4px; width: 60px; background-color: var(--color-primary); margin: 0 auto 1.5rem; border-radius: 2px; }

            /* Hero section specific styling (if needed beyond gradient) */
            .hero-section { position: relative; overflow: hidden; }
            .hero-section::before { /* Optional subtle pattern/overlay */ content: ''; position: absolute; top: -50%; left: -20%; width: 70%; height: 150%; background: rgba(255,255,255,0.05); transform: rotate(20deg); pointer-events: none; opacity: 0.5; }

            /* Mobile menu */
            .mobile-menu { transition: transform var(--transition-speed) ease; transform: translateX(-100%); }
            .mobile-menu.show { transform: translateX(0); }

            /* Reveal on Scroll (Placeholder - Use IntersectionObserver JS) */
            .reveal { opacity: 0; transform: translateY(20px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
            .reveal.active { opacity: 1; transform: translateY(0); }

             /* Service Card */
            .service-card { transition: all var(--transition-speed) ease; border-top: 3px solid transparent; }
            .service-card:hover { border-top-color: var(--color-primary); transform: translateY(-4px); box-shadow: 0 10px 25px rgba(0,0,0,0.07); }
            .icon-circle { width: 56px; height: 56px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; background-color: {{ colors.primary | default('#4A90E2') }}1A; /* Primary with ~10% opacity */ color: var(--color-primary); transition: all var(--transition-speed) ease; }
            .service-card:hover .icon-circle { background-color: var(--color-primary); color: var(--color-text-on-primary); transform: scale(1.1); /* Simple scale instead of rotate */ }

            /* Contact Quick Connect Buttons */
            .quick-connect-button {
                display: flex;
                align-items: center;
                justify-content: center;
                padding: 0.75rem 1rem; /* py-3 px-4 */
                border-radius: 0.375rem; /* rounded-lg */
                font-weight: 500; /* font-medium */
                transition-property: background-color, opacity, box-shadow, transform;
                transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
                transition-duration: 150ms;
                box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06); /* shadow */
            }
             .quick-connect-button:hover {
                opacity: 0.9;
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); /* shadow-md */
                /* transform: translateY(-2px); */ /* Optional subtle lift */
            }


            /* Skip Link */
            .skip-to-content { position: absolute; top: -50px; left: 0; background: var(--color-primary); color: var(--color-text-on-primary); padding: 8px 12px; z-index: 1000; transition: top 0.3s ease; border-bottom-right-radius: 4px; }
            .skip-to-content:focus { top: 0; }

            /* Reduced Motion */
            @media (prefers-reduced-motion: reduce) {
              html { scroll-behavior: auto; }
              *, *::before, *::after { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; scroll-behavior: auto !important; }
            }
        </style>

        <!-- SEO: Add Schema.org JSON-LD -->
        <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "Organization", // Or "LocalBusiness", "ProfessionalService", etc.
          "name": "{{ headline }}",
          "url": "{{ 'https://' + folder_name + '.' + DOMAIN_NAME if folder_name and DOMAIN_NAME else '#' }}", // Construct URL if possible
          {% if logo_path %}"logo": "{{ logo_path }}",{% endif %}
          "description": "{{ tagline }}",
          {% if email %}"email": "{{ email }}",{% endif %}
          {% if phone %}"telephone": "{{ phone }}",{% endif %}
          {% if location and location.address %}
          "address": {
            "@type": "PostalAddress",
            "streetAddress": "{{ location.address }}",
            "addressLocality": "{{ location.city }}",
            "addressRegion": "{{ location.state }}",
            "postalCode": "{{ location.zip }}",
            "addressCountry": "{{ location.country }}"
          },
          {% endif %}
          "sameAs": [ // Add full URLs for social profiles
            {% if social.facebook %}"https://facebook.com/{{ social.facebook }}",{% endif %}
            {% if social.twitter %}"https://twitter.com/{{ social.twitter }}",{% endif %}
            {% if social.instagram %}"https://instagram.com/{{ social.instagram }}",{% endif %}
            {% if social.linkedin %}"{{ social.linkedin }}"{% endif %}
          ].filter(Boolean) {# Ensure trailing comma doesn't cause issues if last item is missing #}
        }
        </script>

    </head>

    <body class="text-base antialiased bg-default"> <!-- Apply default background -->
        <a href="#main-content" class="skip-to-content">Skip to content</a>

        <header class="bg-section-light shadow sticky top-0 z-50"> 
            <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between h-16 md:h-20"> 
                    <div class="flex items-center">
                        {% if logo_path %}
                            <a href="#" aria-label="{{ headline }} homepage">
                                <img class="h-10 md:h-12 w-auto" src="{{ logo_path }}" alt="{{ headline }} logo" loading="lazy">
                            </a>
                        {% endif %}
                        <div class="ml-3">
                            <a href="#" class="text-xl md:text-2xl font-bold text-gray-900 hover:text-primary transition-colors">{{ headline }}</a>
                            {% if tagline %}<p class="text-xs md:text-sm text-muted">{{ tagline }}</p>{% endif %}
                        </div>
                    </div>
                    <div class="hidden md:flex md:items-center md:space-x-5 lg:space-x-6">
                        <a href="#about" class="text-gray-700 hover:text-primary transition-colors font-medium">About</a>
                        {% if services %}
                            <a href="#services" class="text-gray-700 hover:text-primary transition-colors font-medium">Services</a>
                        {% endif %}
                        {% if testimonials %}
                            <a href="#testimonials" class="text-gray-700 hover:text-primary transition-colors font-medium">Testimonials</a>
                        {% endif %}
                        <a href="#contact" class="text-gray-700 hover:text-primary transition-colors font-medium">Contact</a>
                        {% if phone %}
                            <a href="tel:{{ phone }}" class="bg-primary text-contrast-primary px-4 py-2 rounded-md text-sm font-medium hover:opacity-90 transition-opacity flex items-center shadow-sm">
                                <svg class="h-4 w-4 mr-1.5" fill="currentColor"><use href="#icon-phone" /></svg>
                                <span>Call Us</span>
                            </a>
                        {% endif %}
                    </div>
                    <div class="md:hidden flex items-center">
                        <button id="mobile-menu-button" aria-expanded="false" aria-controls="mobile-menu" class="text-gray-700 focus:outline-none p-2 -mr-2">
                            <span class="sr-only">Open main menu</span>
                            <svg class="h-6 w-6" stroke="currentColor" fill="none" viewBox="0 0 24 24"><use href="#icon-menu" /></svg>
                        </button>
                    </div>
                </div>
            </nav>
            <!-- Mobile menu -->
            <div id="mobile-menu" class="md:hidden bg-white border-t border-gray-200 hidden">
                 <div class="px-2 pt-2 pb-3 space-y-1">
                    <a href="#about" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-gray-50 transition-colors">About</a>
                    {% if services %}<a href="#services" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-gray-50 transition-colors">Services</a>{% endif %}
                    {% if testimonials %}<a href="#testimonials" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-gray-50 transition-colors">Testimonials</a>{% endif %}
                    <a href="#contact" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:text-primary hover:bg-gray-50 transition-colors">Contact</a>
                    {% if phone %}
                        <a href="tel:{{ phone }}" class="flex items-center w-full px-3 py-3 rounded-md text-base font-medium bg-primary text-contrast-primary mt-2">
                           <svg class="h-5 w-5 mr-2" fill="currentColor"><use href="#icon-phone" /></svg>
                            <span>Call Us: {{ phone }}</span>
                        </a>
                    {% endif %}
                </div>
            </div>
        </header>

        <main id="main-content">
            <!-- Hero Section: Gradient Background -->
            <section class="hero-section hero-gradient py-20 md:py-28 px-4 sm:px-6 lg:px-8 text-contrast-gradient fade-in">
                 <div class="max-w-7xl mx-auto">
                    <div class="lg:flex lg:items-center lg:justify-between gap-12">
                        <div class="lg:w-1/2 slide-in-left text-center lg:text-left">
                             <!-- Added hero-text-shadow for better contrast -->
                            <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold sm:font-extrabold tracking-tight mb-4 hero-text-shadow">{{ headline }}</h1>
                            <p class="text-lg sm:text-xl max-w-xl mx-auto lg:mx-0 opacity-90 mb-8 hero-text-shadow">{{ tagline }}</p>
                            <div class="flex flex-wrap justify-center lg:justify-start gap-3 sm:gap-4">
                                <a href="#about" class="inline-flex items-center px-5 py-2.5 sm:px-6 sm:py-3 border border-transparent text-sm sm:text-base font-medium rounded-md shadow-sm text-primary bg-white hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-primary focus:ring-white transition-all hover-lift">
                                    <svg class="h-5 w-5 mr-2" fill="currentColor"><use href="#icon-information-circle" /></svg>
                                    Learn More
                                </a>
                                {% if email or phone %} {# Show if either exists #}
                                    <a href="#contact" class="inline-flex items-center px-5 py-2.5 sm:px-6 sm:py-3 border border-transparent text-sm sm:text-base font-medium rounded-md shadow-sm text-contrast-secondary bg-secondary hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-primary focus:ring-secondary transition-all hover-lift">
                                       <svg class="h-5 w-5 mr-2" fill="currentColor"><use href="#icon-mail" /></svg>
                                        Get In Touch
                                    </a>
                                {% endif %}
                            </div>
                        </div>
                         <div class="lg:w-1/2 mt-10 lg:mt-0 slide-in-right">
                            <div class="rounded-lg overflow-hidden shadow-xl h-64 md:h-80 lg:h-96">
                                 {% if banner_path %}
                                    <img src="{{ banner_path }}" alt="{{ headline }} banner image" class="w-full h-full object-cover" loading="lazy">
                                {% else %}
                                    <div class="w-full h-full bg-gradient-primary flex items-center justify-center opacity-50">
                                         <div class="text-center p-8 text-contrast-gradient">
                                             <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 opacity-75" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1"> <path stroke-linecap="round" stroke-linejoin="round" d="M4 5a1 1 0 011-1h14a1 1 0 011 1v14a1 1 0 01-1 1H5a1 1 0 01-1-1V5zm10 10l-3.5-3.5a1 1 0 00-1.414 0L5 16m10-4l-2 2m0 0l-2-2m2 2V7" /> </svg>
                                             <h3 class="text-xl font-bold">{{ headline }}</h3>
                                         </div>
                                     </div>
                                {% endif %}
                             </div>
                        </div>
                     </div>
                 </div>
            </section>

            <!-- Stats Section: White Background -->
            {% if business_stats and business_stats | length > 0 %}
                 <section class="py-12 md:py-16 bg-section-light"> 
                     <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                         <div class="grid grid-cols-2 md:grid-cols-{{ business_stats|length if business_stats|length <= 4 else 4 }} gap-8 text-center">
                             {% for stat in business_stats %}
                                 <div class="reveal">
                                     <div class="text-3xl sm:text-4xl font-bold text-primary">{{ stat.value }}</div>
                                     <div class="text-muted mt-1 md:mt-2 text-sm sm:text-base">{{ stat.label }}</div>
                                 </div>
                             {% endfor %}
                         </div>
                     </div>
                 </section>
            {% endif %}

            <!-- About Section: Neutral (gray-50) Background -->
            <section id="about" class="py-16 md:py-20 px-4 sm:px-6 lg:px-8 bg-section-neutral">
                <div class="max-w-7xl mx-auto">
                     <div class="text-center mb-12 reveal">
                        <h2 class="text-3xl sm:text-4xl font-bold text-gray-900">About Us</h2>
                         <div class="section-divider"></div>
                     </div>
                     <div class="grid md:grid-cols-2 gap-12 lg:gap-16 items-center">
                         <div class="reveal">
                             <div class="relative">
                                 {% if about_image %}
                                     <div class="bg-white shadow-xl rounded-lg p-2 relative z-10">
                                         <img src="{{ about_image }}" alt="About {{ headline }}" class="w-full h-auto object-cover rounded" loading="lazy">
                                     </div>
                                     <div class="absolute -bottom-4 -right-4 w-16 h-16 rounded-lg bg-primary opacity-10 z-0 transform rotate-6"></div>
                                     <div class="absolute -top-4 -left-4 w-20 h-20 rounded-lg bg-secondary opacity-10 z-0 transform -rotate-6"></div>
                                  {% elif banner_path %} {# Fallback to banner if about image missing #}
                                     <div class="bg-white shadow-xl rounded-lg p-2 relative z-10">
                                         <img src="{{ banner_path }}" alt="{{ headline }} banner" class="w-full h-auto object-cover rounded" loading="lazy">
                                     </div>
                                      <div class="absolute -bottom-4 -right-4 w-16 h-16 rounded-lg bg-primary opacity-10 z-0 transform rotate-6"></div>
                                      <div class="absolute -top-4 -left-4 w-20 h-20 rounded-lg bg-secondary opacity-10 z-0 transform -rotate-6"></div>
                                  {% else %}
                                      <div class="bg-white text-gray-400 rounded-lg shadow-xl p-8 text-center aspect-video flex flex-col justify-center items-center">
                                         <svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-16 w-16 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1"> <path stroke-linecap="round" stroke-linejoin="round" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.24a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z" /> </svg>
                                         <p class="text-sm">About Image</p>
                                     </div>
                                 {% endif %}
                             </div>
                         </div>
                         <div class="reveal">
                             <p class="text-base md:text-lg text-gray-700 mb-6 leading-relaxed">{{ about }}</p>
                             <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
                                {% for feature in [("Professional Service", "shield-check"), ("Fast Delivery", "lightning-bolt"), ("Expert Team", "users"), ("Best Value", "currency-dollar")] %}
                                <div class="bg-white rounded-lg p-3 shadow-sm hover-lift flex items-center">
                                    <svg class="h-5 w-5 mr-2.5 text-primary flex-shrink-0" fill="currentColor"><use href="#icon-{{ feature[1] }}" /></svg>
                                    <span class="font-medium text-gray-800 text-sm">{{ feature[0] }}</span>
                                </div>
                                {% endfor %}
                             </div>
                             <a href="#contact" class="inline-flex items-center px-5 py-2.5 bg-primary text-contrast-primary text-sm font-medium rounded-md hover:opacity-90 transition-opacity shadow hover-lift">
                               <svg class="h-5 w-5 mr-2" fill="currentColor"><use href="#icon-plus-circle" /></svg>
                                <span>Get Started</span>
                            </a>
                        </div>
                     </div>
                 </div>
            </section>

            <!-- Services Section: White Background -->
            {% if services and services | length > 0 %}
                 <section id="services" class="py-16 md:py-20 px-4 sm:px-6 lg:px-8 bg-section-light">
                     <div class="max-w-7xl mx-auto">
                         <div class="text-center mb-12 reveal">
                             <h2 class="text-3xl sm:text-4xl font-bold text-gray-900">Our Services</h2>
                             <div class="section-divider"></div>
                         </div>
                         <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-8">
                             {% for service in services %}
                                 <div class="service-card bg-white rounded-lg shadow-md p-6 text-center reveal flex flex-col">
                                    <div class="icon-circle">
                                        <svg class="h-7 w-7 sm:h-8 sm:w-8" fill="currentColor"><use href="#icon-{{ service.icon | default('default') }}" /></svg>
                                     </div>
                                    <h3 class="text-lg sm:text-xl font-semibold mb-2 text-gray-900"> {{ service.name | default(service) }} </h3>
                                     <div class="w-12 h-0.5 bg-primary mx-auto mb-4 rounded"></div>
                                     {% if service.description %}
                                         <p class="text-muted text-sm flex-grow">{{ service.description }}</p>
                                     {% endif %}
                                 </div>
                             {% endfor %}
                         </div>
                     </div>
                 </section>
            {% endif %}

            <!-- CTA Banner: Solid Primary Background -->
            <section class="bg-primary py-16 px-4 sm:px-6 lg:px-8 text-contrast-primary">
                <div class="max-w-5xl mx-auto text-center">
                     <h2 class="text-3xl sm:text-4xl font-bold mb-4 reveal">Ready to Elevate Your Business?</h2>
                     <p class="text-lg md:text-xl max-w-2xl mx-auto mb-8 opacity-90 reveal">Let's discuss how our services can help you achieve your goals. Get in touch today!</p>
                     <div class="reveal">
                         <!-- Button uses white bg and primary text for contrast -->
                        <a href="#contact" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-primary bg-white hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-primary focus:ring-white transition-all hover-lift">
                            <svg class="h-5 w-5 mr-2" fill="currentColor"><use href="#icon-mail" /></svg>
                            Request a Consultation
                        </a>
                    </div>
                 </div>
            </section>

            <!-- Testimonials Section: Neutral (gray-50) Background -->
            {% if testimonials and testimonials | length > 0 %}
                 <section id="testimonials" class="py-16 md:py-20 px-4 sm:px-6 lg:px-8 bg-section-neutral">
                     <div class="max-w-7xl mx-auto">
                        <div class="text-center mb-12 reveal">
                             <h2 class="text-3xl sm:text-4xl font-bold text-gray-900">What Our Clients Say</h2>
                             <div class="section-divider"></div>
                         </div>
                        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                            {% for testimonial in testimonials %}
                                 <div class="bg-white rounded-lg shadow-md p-6 flex flex-col hover-lift reveal">
                                     <div class="flex items-center mb-4">
                                         <div class="flex-shrink-0">
                                             {% if testimonial.avatar %}
                                                 <img class="h-12 w-12 rounded-full object-cover" src="{{ testimonial.avatar }}" alt="{{ testimonial.name }} avatar" loading="lazy">
                                             {% else %}
                                                 <div class="h-12 w-12 rounded-full bg-secondary text-contrast-secondary flex items-center justify-center text-lg font-semibold">
                                                     {{ testimonial.name|first|upper }}
                                                 </div>
                                             {% endif %}
                                         </div>
                                         <div class="ml-4">
                                             <h4 class="text-md md:text-lg font-semibold text-gray-900">{{ testimonial.name }}</h4>
                                             {% if testimonial.title %}
                                                 <p class="text-sm text-muted">{{ testimonial.title }}</p>
                                             {% endif %}
                                         </div>
                                     </div>
                                    <div class="mb-3 flex">
                                        {% set rating = testimonial.rating|default(5)|int %}
                                        {% for i in range(5) %}
                                            <svg class="h-5 w-5 {{ 'text-yellow-400' if i < rating else 'text-gray-300' }}" fill="currentColor"><use href="#icon-star" /></svg>
                                        {% endfor %}
                                     </div>
                                    <blockquote class="italic text-gray-700 mb-4 flex-grow text-sm md:text-base leading-relaxed">"{{ testimonial.quote }}"</blockquote>
                                     {% if testimonial.company %}
                                         <p class="text-muted text-sm mt-auto font-medium">{{ testimonial.company }}</p>
                                     {% endif %}
                                </div>
                            {% endfor %}
                         </div>
                     </div>
                </section>
            {% endif %}

            <!-- Contact Section: White Background, Two Columns -->
            <section id="contact" class="py-16 md:py-20 px-4 sm:px-6 lg:px-8 bg-section-light"> 
                 <div class="max-w-7xl mx-auto">
                     <div class="text-center mb-12 reveal">
                        <h2 class="text-3xl sm:text-4xl font-bold text-gray-900">Contact Us</h2>
                         <div class="section-divider"></div>
                         <p class="mt-4 max-w-2xl mx-auto text-lg text-muted">We'd love to hear from you! Reach out through one of the methods below.</p>
                     </div>
                     <!-- Two Column Layout -->
                    <div class="bg-gray-50 rounded-lg shadow-lg overflow-hidden reveal">
                         <div class="grid md:grid-cols-5 gap-px">
                            <!-- Left Panel: Solid Primary Background -->
                            <div class="md:col-span-2 bg-primary p-8 text-contrast-primary">
                                 <h3 class="text-xl sm:text-2xl font-bold mb-6">Get In Touch</h3>
                                 <p class="mb-6 sm:mb-8 opacity-90 text-sm sm:text-base">Contact us directly using the information below or follow us on social media.</p>
                                <div class="space-y-4 sm:space-y-5">
                                     {% if email %}
                                        <div class="flex items-start">
                                            <svg class="h-5 w-5 mr-3 flex-shrink-0 mt-0.5"><use href="#icon-mail" /></svg>
                                            <div><h4 class="text-sm font-semibold uppercase tracking-wider mb-0.5">Email</h4><a href="mailto:{{ email }}" class="hover:underline break-all">{{ email }}</a></div>
                                        </div>
                                    {% endif %}
                                    {% if phone %}
                                        <div class="flex items-start">
                                            <svg class="h-5 w-5 mr-3 flex-shrink-0 mt-0.5"><use href="#icon-phone" /></svg>
                                            <div><h4 class="text-sm font-semibold uppercase tracking-wider mb-0.5">Phone</h4><a href="tel:{{ phone }}" class="hover:underline">{{ phone }}</a></div>
                                        </div>
                                    {% endif %}
                                    {% if location %}
                                         <div class="flex items-start">
                                             <svg class="h-5 w-5 mr-3 flex-shrink-0 mt-0.5"><use href="#icon-location" /></svg>
                                             <div><h4 class="text-sm font-semibold uppercase tracking-wider mb-0.5">Location</h4>
                                                 <p class="text-sm"> {% if location.address %}{{ location.address }}{% endif %}{% if location.address and (location.city or location.state) %}, {% endif %} {% if location.city %}{{ location.city }}{% endif %}{% if location.state %}, {{ location.state }}{% endif %}{% if location.zip %} {{ location.zip }}{% endif %}{% if location.country and (location.address or location.city or location.state) %}, {% endif %}{% if location.country %}{{ location.country }}{% endif %} </p>
                                             </div>
                                         </div>
                                    {% endif %}
                                    {% if phone %} {# Show WhatsApp only if phone exists #}
                                         <div class="flex items-start">
                                             <svg class="h-5 w-5 mr-3 flex-shrink-0 mt-0.5"><use href="#icon-whatsapp" /></svg>
                                             <div><h4 class="text-sm font-semibold uppercase tracking-wider mb-0.5">WhatsApp</h4><a href="https://wa.me/{{ phone | replace(' ', '') | replace('-', '') | replace('(', '') | replace(')', '') }}?text=Inquiry about {{headline}}" target="_blank" class="hover:underline">Message Us</a></div>
                                         </div>
                                    {% endif %}
                                 </div>
                                 {% if social %}
                                    <div class="mt-8">
                                        <h4 class="text-sm font-semibold uppercase tracking-wider mb-3">Follow Us</h4>
                                         <div class="flex space-x-4">
                                             {% if social.facebook %}<a href="https://facebook.com/{{ social.facebook }}" target="_blank" class="opacity-80 hover:opacity-100 transition-opacity"><span class="sr-only">Facebook</span><svg class="h-6 w-6"><use href="#icon-facebook" /></svg></a>{% endif %}
                                             {% if social.twitter %}<a href="https://twitter.com/{{ social.twitter }}" target="_blank" class="opacity-80 hover:opacity-100 transition-opacity"><span class="sr-only">Twitter</span><svg class="h-6 w-6"><use href="#icon-twitter" /></svg></a>{% endif %}
                                             {% if social.instagram %}<a href="https://instagram.com/{{ social.instagram }}" target="_blank" class="opacity-80 hover:opacity-100 transition-opacity"><span class="sr-only">Instagram</span><svg class="h-6 w-6"><use href="#icon-instagram" /></svg></a>{% endif %}
                                             {% if social.linkedin %}<a href="{{ social.linkedin }}" target="_blank" class="opacity-80 hover:opacity-100 transition-opacity"><span class="sr-only">LinkedIn</span><svg class="h-6 w-6"><use href="#icon-linkedin" /></svg></a>{% endif %}
                                         </div>
                                     </div>
                                {% endif %}
                             </div>
                             <!-- Right Panel: White Background with Connect Buttons -->
                             <div class="md:col-span-3 p-8 bg-white">
                                 <h3 class="text-xl sm:text-2xl font-bold text-gray-900 mb-6">Connect With Us</h3>
                                 <div class="bg-gray-50 p-6 rounded-lg shadow-sm">
                                     <p class="text-gray-700 mb-6">We're just a message away! Reach out using WhatsApp or Email for a quick response.</p>
                                    <!-- Replaced form with quick connect buttons -->
                                    <div class="grid grid-cols-1 gap-4 sm:grid-cols-1"> 
                                        {% if phone %}
                                            <a href="https://wa.me/{{ phone | replace(' ', '') | replace('-', '') | replace('(', '') | replace(')', '') }}?text=Inquiry about {{headline}}" target="_blank" class="quick-connect-button bg-green-500 text-white hover:bg-green-600">
                                                <svg class="h-5 w-5 mr-2"><use href="#icon-whatsapp" /></svg>
                                                <span>WhatsApp Us</span>
                                            </a>
                                        {% endif %}
                                        {% if email %}
                                            <a href="mailto:{{ email }}?subject=Inquiry about {{headline}}" target="_blank" class="quick-connect-button bg-primary text-contrast-primary hover:opacity-90">
                                                <svg class="h-5 w-5 mr-2"><use href="#icon-mail" /></svg>
                                                <span>Email Us</span>
                                            </a>
                                        {% endif %}
                                        {% if phone %}
                                            <a href="tel:{{ phone }}" class="quick-connect-button bg-secondary text-contrast-secondary hover:opacity-90">
                                                <svg class="h-5 w-5 mr-2"><use href="#icon-phone" /></svg>
                                                <span>Call Us Directly</span>
                                            </a>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                         </div>
                    </div>
                 </div>
            </section>
        </main>

        <!-- Footer: Dark Background -->
        <footer class="bg-section-dark text-gray-400 py-12 px-4 sm:px-6 lg:px-8">
             <div class="max-w-7xl mx-auto">
                 <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-8 text-sm">
                     <div> <!-- Footer Col 1: Logo & Tagline -->
                         <div class="flex items-center mb-4">
                             {% if logo_path %}<img src="{{ logo_path }}" alt="{{ headline }} logo" class="h-8 mr-2" loading="lazy">{% endif %}
                             <span class="text-lg font-semibold text-white">{{ headline }}</span>
                         </div>
                         <p class="text-gray-400">{{ tagline }}</p>
                     </div>
                     <div> <!-- Footer Col 2: Quick Links -->
                         <h4 class="text-md font-semibold text-white mb-3 uppercase tracking-wider">Quick Links</h4>
                         <ul class="space-y-2">
                             <li><a href="#" class="hover:text-white transition-colors">Home</a></li>
                             <li><a href="#about" class="hover:text-white transition-colors">About</a></li>
                             {% if services %}<li><a href="#services" class="hover:text-white transition-colors">Services</a></li>{% endif %}
                             {% if testimonials %}<li><a href="#testimonials" class="hover:text-white transition-colors">Testimonials</a></li>{% endif %}
                             <li><a href="#contact" class="hover:text-white transition-colors">Contact</a></li>
                         </ul>
                     </div>
                     <div> <!-- Footer Col 3: Contact Info -->
                         <h4 class="text-md font-semibold text-white mb-3 uppercase tracking-wider">Contact Info</h4>
                         <ul class="space-y-3">
                             {% if email %}<li class="flex items-center"><svg class="h-5 w-5 mr-2 text-primary flex-shrink-0" fill="currentColor"><use href="#icon-mail" /></svg><a href="mailto:{{ email }}" class="hover:text-white transition-colors break-all">{{ email }}</a></li>{% endif %}
                             {% if phone %}<li class="flex items-center"><svg class="h-5 w-5 mr-2 text-primary flex-shrink-0" fill="currentColor"><use href="#icon-phone" /></svg><a href="tel:{{ phone }}" class="hover:text-white transition-colors">{{ phone }}</a></li>{% endif %}
                             {% if location %}<li class="flex items-start"><svg class="h-5 w-5 mr-2 text-primary mt-0.5 flex-shrink-0" fill="currentColor"><use href="#icon-location" /></svg><span>{% if location.address %}{{ location.address }}{% if location.city or location.state %}, {% endif %}{% endif %}{% if location.city %}{{ location.city }}{% endif %}{% if location.state %}, {{ location.state }}{% endif %}{% if location.zip %} {{ location.zip }}{% endif %}{% if location.country and (location.address or location.city or location.state) %}, {% endif %}{% if location.country %}{{ location.country }}{% endif %}</span></li>{% endif %}
                         </ul>
                         {% if social %}
                            <div class="mt-4 flex space-x-4">
                                {% if social.facebook %}<a href="https://facebook.com/{{ social.facebook }}" target="_blank" class="text-gray-400 hover:text-white transition-colors"><span class="sr-only">Facebook</span><svg class="h-5 w-5"><use href="#icon-facebook" /></svg></a>{% endif %}
                                {% if social.twitter %}<a href="https://twitter.com/{{ social.twitter }}" target="_blank" class="text-gray-400 hover:text-white transition-colors"><span class="sr-only">Twitter</span><svg class="h-5 w-5"><use href="#icon-twitter" /></svg></a>{% endif %}
                                {% if social.instagram %}<a href="https://instagram.com/{{ social.instagram }}" target="_blank" class="text-gray-400 hover:text-white transition-colors"><span class="sr-only">Instagram</span><svg class="h-5 w-5"><use href="#icon-instagram" /></svg></a>{% endif %}
                                {% if social.linkedin %}<a href="{{ social.linkedin }}" target="_blank" class="text-gray-400 hover:text-white transition-colors"><span class="sr-only">LinkedIn</span><svg class="h-5 w-5"><use href="#icon-linkedin" /></svg></a>{% endif %}
                            </div>
                         {% endif %}
                     </div>
                 </div>
                 <!-- UPDATED: Use current_year variable and consistent text color -->
                <div class="border-t border-gray-700 pt-6 mt-8 text-center text-xs text-gray-400">
                     <p> {{ current_year }} {{ headline }}. All rights reserved.</p>
                 </div>
             </div>
        </footer>

        <!-- Scroll to top button -->
        <button id="scrollToTop" class="fixed bottom-4 right-4 sm:bottom-6 sm:right-6 h-10 w-10 sm:h-12 sm:w-12 rounded-full bg-primary text-contrast-primary flex items-center justify-center shadow-lg z-40 opacity-0 pointer-events-none transition-all hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-offset-2 ring-primary">
            <span class="sr-only">Scroll to top</span>
            <svg class="h-5 w-5 sm:h-6 sm:w-6"><use href="#icon-arrow-up" /></svg>
        </button>

        <!-- JavaScript (Using IntersectionObserver for reveals) -->
        <script>
            // Mobile menu toggle (with basic focus trapping)
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            let isMenuOpen = false;

            if (mobileMenuButton && mobileMenu) {
                const focusableElements = mobileMenu.querySelectorAll('a[href], button:not([disabled])');
                const firstFocusableElement = focusableElements[0];
                const lastFocusableElement = focusableElements[focusableElements.length - 1];

                function toggleMenu() {
                    isMenuOpen = !isMenuOpen;
                    mobileMenu.classList.toggle('hidden');
                    mobileMenuButton.setAttribute('aria-expanded', isMenuOpen);
                    if (isMenuOpen) { firstFocusableElement?.focus(); }
                }

                mobileMenuButton.addEventListener('click', toggleMenu);

                mobileMenu.addEventListener('keydown', (e) => {
                    if (!isMenuOpen) return;
                    const isTabPressed = e.key === 'Tab' || e.keyCode === 9;
                    if (!isTabPressed) {
                         if (e.key === 'Escape' || e.keyCode === 27) { toggleMenu(); mobileMenuButton.focus(); }
                         return;
                    }
                    if (e.shiftKey) { /* Shift + Tab */
                        if (document.activeElement === firstFocusableElement) { lastFocusableElement.focus(); e.preventDefault(); }
                    } else { /* Tab */
                        if (document.activeElement === lastFocusableElement) { firstFocusableElement.focus(); e.preventDefault(); }
                    }
                });
            }

            // Scroll to top functionality (debounced)
            const scrollToTopButton = document.getElementById('scrollToTop');
            if (scrollToTopButton) {
                 let ticking = false;
                 function updateScrollButtonVisibility() {
                    if (window.scrollY > 300) { scrollToTopButton.classList.add('opacity-100', 'pointer-events-auto'); scrollToTopButton.classList.remove('opacity-0', 'pointer-events-none'); }
                    else { scrollToTopButton.classList.add('opacity-0', 'pointer-events-none'); scrollToTopButton.classList.remove('opacity-100', 'pointer-events-auto'); }
                    ticking = false;
                 }
                 window.addEventListener('scroll', () => {
                     if (!ticking) { window.requestAnimationFrame(updateScrollButtonVisibility); ticking = true; }
                 }, { passive: true });
                 scrollToTopButton.addEventListener('click', () => { window.scrollTo({top: 0, behavior: 'smooth'}); });
                 updateScrollButtonVisibility(); // Initial check
            }

            // Reveal animations on scroll (IntersectionObserver Implementation)
            document.addEventListener('DOMContentLoaded', () => {
                const revealElements = document.querySelectorAll('.reveal');
                if ('IntersectionObserver' in window) {
                    const observer = new IntersectionObserver((entries, observerInstance) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) { entry.target.classList.add('active'); /* observerInstance.unobserve(entry.target); */ }
                        });
                    }, { threshold: 0.1 });
                    revealElements.forEach(el => observer.observe(el));
                } else { // Fallback for older browsers
                    const checkRevealFallback = () => { revealElements.forEach(el => { if (el.getBoundingClientRect().top < window.innerHeight - 50) { el.classList.add('active'); } }); };
                    window.addEventListener('scroll', checkRevealFallback, { passive: true }); checkRevealFallback();
                }

                // Icon Fallback Check (Optional, can be removed if sprite is reliable)
                document.querySelectorAll('svg use').forEach(use => {
                    try { const id = use.getAttribute('href'); if (id && !document.querySelector(id)) { use.setAttribute('href', '#icon-default'); } } catch (e) {}
                });
            });
        </script>
    </body>
</html>
